<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://code.jquery.com https://unpkg.com https://d3js.org https://threejs.org https://cdn.plot.ly https://stackpath.bootstrapcdn.com https://maps.googleapis.com https://cdn.tailwindcss.com https://ajax.googleapis.com https://kit.fontawesome.com https://cdn.datatables.net https://maxcdn.bootstrapcdn.com https://code.highcharts.com https://tako-static-assets-production.s3.amazonaws.com https://www.youtube.com https://fonts.googleapis.com https://fonts.gstatic.com https://pfst.cf2.poecdn.net https://puc.poecdn.net https://i.imgur.com https://wikimedia.org https://*.icons8.com https://*.giphy.com https://picsum.photos https://images.unsplash.com; frame-src 'self' https://www.youtube.com https://trytako.com; child-src 'self'; manifest-src 'self'; worker-src 'self'; upgrade-insecure-requests; block-all-mixed-content;">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>登录</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#4F46E5',
                        'primary-light': '#6366F1',
                        'primary-dark': '#3730A3',
                    }
                }
            }
        }
    </script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #4F46E5, #6366F1);
        }
        
        .input-field {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .dark .input-field {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .social-btn {
            transition: all 0.3s ease;
        }
        
        .social-btn:hover {
            transform: translateY(-2px);
        }

        .device-card {
            transition: all 0.2s ease;
        }

        .device-card:active {
            transform: scale(0.98);
        }

        .room-tab {
            transition: all 0.3s ease;
        }

        .room-tab.active {
            background: #4F46E5;
            color: white;
        }
    </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 transition-colors duration-300">
    <div class="min-h-screen flex items-center justify-center p-4">
        <div class="w-full max-w-md">
            <!-- Login Form -->
            <div id="loginForm" class="space-y-6">
                <div class="text-center mb-8">
                    <div class="flex items-center justify-between mb-4">
                        <button id="backBtn" onclick="handleBackButton()" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800">
                            <svg class="w-6 h-6 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                            </svg>
                        </button>
                        <div class="w-10"></div>
                    </div>
                    <h1 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">欢迎回来</h1>
                    <p class="text-gray-600 dark:text-gray-400">管理员，请验证您的身份</p>
                </div>

                <div class="space-y-4">
                    <!-- Account Input -->
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <svg class="w-5 h-5 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                            </svg>
                        </div>
                        <input type="text" class="input-field w-full pl-10 pr-4 py-3 rounded-lg text-base text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="输入您的账号">
                    </div>

                    <!-- Password Input -->
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <svg class="w-5 h-5 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                            </svg>
                        </div>
                        <input type="password" id="loginPassword" class="input-field w-full pl-10 pr-12 py-3 rounded-lg text-base text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="输入您的密码">
                        <button type="button" class="absolute inset-y-0 right-0 pr-3 flex items-center" onclick="togglePassword()">
                            <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                            </svg>
                        </button>
                    </div>

                    <!-- Remember & Forgot -->
                    <div class="flex items-center justify-between text-sm">
                        <label class="flex items-center">
                            <input type="checkbox" class="rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
                            <span class="ml-2 text-gray-600 dark:text-gray-400">记住我</span>
                        </label>
                        <button onclick="showForgotPassword()" class="text-indigo-500 hover:text-indigo-600">忘记密码</button>
                    </div>

                    <!-- Login Button -->
                    <button onclick="handleLogin()" class="w-full bg-indigo-500 hover:bg-indigo-600 text-white py-3 rounded-full font-medium text-base transition-colors">
                        登录
                    </button>

                    <!-- Other Login Methods -->
                    <div class="text-center">
                        <p class="text-gray-500 dark:text-gray-400 text-sm mb-4">其他登录方式</p>
                        <div class="flex justify-center space-x-6">
                            <button onclick="showPhoneLogin()" class="social-btn flex items-center space-x-2 px-4 py-2 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800">
                                <svg class="w-5 h-5 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                                </svg>
                                <span class="text-gray-700 dark:text-gray-300">手机号登录</span>
                            </button>
                            <button onclick="showWechatLogin()" class="social-btn flex items-center space-x-2 px-4 py-2 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800">
                                <svg class="w-5 h-5 text-green-500" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M8.691 2.188C3.891 2.188 0 5.476 0 9.53c0 2.212 1.17 4.203 3.002 5.55a.59.59 0 0 1 .213.665l-.39 1.48c-.019.07-.048.141-.048.213 0 .163.13.295.29.295a.326.326 0 0 0 .167-.054l1.903-1.114a.864.864 0 0 1 .717-.098 10.16 10.16 0 0 0 2.837.403c.276 0 .543-.027.811-.05-.857-2.578.157-4.972 1.932-6.446 1.703-1.415 3.882-1.98 6.292-1.746-.297-3.46-3.777-6.43-8.035-6.43ZM5.785 5.991c.642 0 1.162.529 1.162 1.18 0 .659-.52 1.188-1.162 1.188-.642 0-1.162-.53-1.162-1.188 0-.651.52-1.18 1.162-1.18Zm5.813 0c.642 0 1.162.529 1.162 1.18 0 .659-.52 1.188-1.162 1.188-.642 0-1.162-.53-1.162-1.188 0-.651.52-1.18 1.162-1.18ZM24 14.755c0-3.334-2.907-6.047-6.479-6.047-3.571 0-6.479 2.713-6.479 6.047 0 3.335 2.908 6.048 6.479 6.048a8.515 8.515 0 0 0 2.219-.294.515.515 0 0 1 .534.735l1.406.821a.326.326 0 0 0 .167.054.295.295 0 0 0 .29-.295c0-.072-.029-.143-.048-.213l-.39-1.48a.59.59 0 0 1 .213-.665C22.83 18.958 24 16.967 24 14.755ZM15.691 13.034c-.481 0-.871.398-.871.888 0 .491.39.89.871.89s.871-.399.871-.89c0-.49-.39-.888-.871-.888Zm4.627 0c-.481 0-.871.398-.871.888 0 .491.39.89.871.89s.871-.399.871-.89c0-.49-.39-.888-.871-.888Z"></path>
                                </svg>
                                <span class="text-gray-700 dark:text-gray-300">微信登录</span>
                            </button>
                        </div>
                    </div>

                    <!-- Register Link -->
                    <div class="text-center">
                        <p class="text-gray-600 dark:text-gray-400">还没有账号？<button id="toRegister" onclick="goToRegister()" class="text-indigo-500 hover:text-indigo-600">马上注册</button></p>
                    </div>
                </div>
            </div>

            <!-- Phone Login Page -->
            <div id="phoneLoginPage" class="hidden space-y-6">
                <div class="text-center mb-8">
                    <div class="flex items-center justify-between mb-4">
                        <button onclick="goBackToLogin()" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800">
                            <svg class="w-6 h-6 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                            </svg>
                        </button>
                        <div class="w-10"></div>
                    </div>
                    <h1 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">手机号登录</h1>
                    <p class="text-gray-600 dark:text-gray-400">请输入手机号码获取验证码</p>
                </div>

                <div class="space-y-4">
                    <!-- Phone Input -->
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <svg class="w-5 h-5 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                            </svg>
                        </div>
                        <input type="tel" class="input-field w-full pl-10 pr-4 py-3 rounded-lg text-base text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="请输入手机号码">
                    </div>

                    <!-- Code Input with Send Button -->
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <svg class="w-5 h-5 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                        <input type="text" class="input-field w-full pl-10 pr-24 py-3 rounded-lg text-base text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="请输入验证码">
                        <button onclick="sendSmsCode()" class="absolute inset-y-0 right-0 pr-3 flex items-center text-indigo-500 hover:text-indigo-600 text-sm font-medium">
                            发送验证码
                        </button>
                    </div>

                    <!-- Login Button -->
                    <button onclick="handlePhoneLogin()" class="w-full bg-indigo-500 hover:bg-indigo-600 text-white py-3 rounded-full font-medium text-base transition-colors">
                        登录
                    </button>

                    <!-- Back to password login -->
                    <div class="text-center">
                        <button onclick="goBackToLogin()" class="text-indigo-500 hover:text-indigo-600">返回密码登录</button>
                    </div>
                </div>
            </div>

            <!-- Forgot Password Page -->
            <div id="forgotPasswordPage" class="hidden space-y-6">
                <div class="text-center mb-8">
                    <div class="flex items-center justify-between mb-4">
                        <button onclick="goBackToLogin()" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800">
                            <svg class="w-6 h-6 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                            </svg>
                        </button>
                        <div class="w-10"></div>
                    </div>
                    <h1 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">找回密码</h1>
                    <p class="text-gray-600 dark:text-gray-400">请输入您的手机号码或邮箱地址</p>
                </div>

                <div class="space-y-4">
                    <!-- Reset method selection -->
                    <div class="flex space-x-2 mb-4">
                        <button onclick="setResetMethod('phone')" id="phoneMethod" class="flex-1 py-2 px-4 bg-indigo-500 text-white rounded-lg text-sm font-medium">手机号</button>
                        <button onclick="setResetMethod('email')" id="emailMethod" class="flex-1 py-2 px-4 bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-lg text-sm font-medium">邮箱</button>
                    </div>

                    <!-- Phone/Email Input -->
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <svg id="resetIcon" class="w-5 h-5 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                            </svg>
                        </div>
                        <input type="text" id="resetInput" class="input-field w-full pl-10 pr-4 py-3 rounded-lg text-base text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="请输入手机号码">
                    </div>

                    <!-- Verification Code Input -->
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <svg class="w-5 h-5 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                        <input type="text" class="input-field w-full pl-10 pr-24 py-3 rounded-lg text-base text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="请输入验证码">
                        <button onclick="sendResetCode()" class="absolute inset-y-0 right-0 pr-3 flex items-center text-indigo-500 hover:text-indigo-600 text-sm font-medium">
                            发送验证码
                        </button>
                    </div>

                    <!-- New Password -->
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <svg class="w-5 h-5 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                            </svg>
                        </div>
                        <input type="password" class="input-field w-full pl-10 pr-4 py-3 rounded-lg text-base text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="请输入新密码">
                    </div>

                    <!-- Confirm Password -->
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <svg class="w-5 h-5 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                            </svg>
                        </div>
                        <input type="password" class="input-field w-full pl-10 pr-4 py-3 rounded-lg text-base text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="请确认新密码">
                    </div>

                    <!-- Reset Button -->
                    <button onclick="handlePasswordReset()" class="w-full bg-indigo-500 hover:bg-indigo-600 text-white py-3 rounded-full font-medium text-base transition-colors">
                        重置密码
                    </button>

                    <!-- Back to login -->
                    <div class="text-center">
                        <button onclick="goBackToLogin()" class="text-indigo-500 hover:text-indigo-600">返回登录</button>
                    </div>
                </div>
            </div>

            <!-- WeChat Login Page -->
            <div id="wechatLoginPage" class="hidden space-y-6">
                <div class="text-center mb-8">
                    <div class="flex items-center justify-between mb-4">
                        <button onclick="goBackToLogin()" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800">
                            <svg class="w-6 h-6 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                            </svg>
                        </button>
                        <div class="w-10"></div>
                    </div>
                    <h1 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">微信登录</h1>
                    <p class="text-gray-600 dark:text-gray-400">请使用微信扫描二维码登录</p>
                </div>

                <div class="text-center space-y-6">
                    <!-- QR Code Placeholder -->
                    <div class="w-48 h-48 mx-auto bg-gray-100 dark:bg-gray-800 rounded-2xl flex flex-col items-center justify-center border-2 border-dashed border-gray-300 dark:border-gray-600">
                        <svg class="w-16 h-16 text-green-500 mb-2" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M8.691 2.188C3.891 2.188 0 5.476 0 9.53c0 2.212 1.17 4.203 3.002 5.55a.59.59 0 0 1 .213.665l-.39 1.48c-.019.07-.048.141-.048.213 0 .163.13.295.29.295a.326.326 0 0 0 .167-.054l1.903-1.114a.864.864 0 0 1 .717-.098 10.16 10.16 0 0 0 2.837.403c.276 0 .543-.027.811-.05-.857-2.578.157-4.972 1.932-6.446 1.703-1.415 3.882-1.98 6.292-1.746-.297-3.46-3.777-6.43-8.035-6.43ZM5.785 5.991c.642 0 1.162.529 1.162 1.18 0 .659-.52 1.188-1.162 1.188-.642 0-1.162-.53-1.162-1.188 0-.651.52-1.18 1.162-1.18Zm5.813 0c.642 0 1.162.529 1.162 1.18 0 .659-.52 1.188-1.162 1.188-.642 0-1.162-.53-1.162-1.188 0-.651.52-1.18 1.162-1.18ZM24 14.755c0-3.334-2.907-6.047-6.479-6.047-3.571 0-6.479 2.713-6.479 6.047 0 3.335 2.908 6.048 6.479 6.048a8.515 8.515 0 0 0 2.219-.294.515.515 0 0 1 .534.735l1.406.821a.326.326 0 0 0 .167.054.295.295 0 0 0 .29-.295c0-.072-.029-.143-.048-.213l-.39-1.48a.59.59 0 0 1 .213-.665C22.83 18.958 24 16.967 24 14.755ZM15.691 13.034c-.481 0-.871.398-.871.888 0 .491.39.89.871.89s.871-.399.871-.89c0-.49-.39-.888-.871-.888Zm4.627 0c-.481 0-.871.398-.871.888 0 .491.39.89.871.89s.871-.399.871-.89c0-.49-.39-.888-.871-.888Z"></path>
                        </svg>
                        <p class="text-sm text-gray-500 dark:text-gray-400">微信二维码</p>
                        <p class="text-xs text-gray-400 dark:text-gray-500 mt-1">请使用微信扫一扫</p>
                    </div>

                    <!-- Refresh QR Code -->
                    <button onclick="refreshQRCode()" class="text-indigo-500 hover:text-indigo-600 text-sm font-medium">
                        刷新二维码
                    </button>

                    <!-- Login Status -->
                    <div class="space-y-2">
                        <div class="flex items-center justify-center space-x-2">
                            <div class="w-2 h-2 bg-orange-500 rounded-full animate-pulse"></div>
                            <span class="text-sm text-gray-600 dark:text-gray-400">等待微信扫码...</span>
                        </div>
                    </div>

                    <!-- Instructions -->
                    <div class="bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 text-left">
                        <h3 class="text-sm font-medium text-blue-900 dark:text-blue-200 mb-2">扫码登录步骤：</h3>
                        <ol class="text-xs text-blue-700 dark:text-blue-300 space-y-1">
                            <li>1. 打开微信APP</li>
                            <li>2. 点击右上角"+"号</li>
                            <li>3. 选择"扫一扫"</li>
                            <li>4. 扫描上方二维码</li>
                            <li>5. 在手机上确认登录</li>
                        </ol>
                    </div>

                    <!-- Back to login -->
                    <div class="text-center">
                        <button onclick="goBackToLogin()" class="text-indigo-500 hover:text-indigo-600">返回登录</button>
                    </div>
                </div>
            </div>

            <!-- Register Page -->
            <div id="registerPage" class="hidden space-y-6">
                <div class="text-center mb-8">
                    <div class="flex items-center justify-between mb-4">
                        <button onclick="goBackToLogin()" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800">
                            <svg class="w-6 h-6 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                            </svg>
                        </button>
                        <div class="w-10"></div>
                    </div>
                    <h1 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">创建账号</h1>
                    <p class="text-gray-600 dark:text-gray-400">请填写以下信息创建您的账号</p>
                </div>

                <div class="space-y-4">
                    <!-- Username Input -->
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <svg class="w-5 h-5 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                            </svg>
                        </div>
                        <input type="text" class="input-field w-full pl-10 pr-4 py-3 rounded-lg text-base text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="请输入用户名">
                    </div>

                    <!-- Phone Input -->
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <svg class="w-5 h-5 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                            </svg>
                        </div>
                        <input type="tel" class="input-field w-full pl-10 pr-4 py-3 rounded-lg text-base text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="请输入手机号码">
                    </div>

                    <!-- Email Input -->
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <svg class="w-5 h-5 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"></path>
                            </svg>
                        </div>
                        <input type="email" class="input-field w-full pl-10 pr-4 py-3 rounded-lg text-base text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="请输入邮箱地址（可选）">
                    </div>

                    <!-- Password Input -->
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <svg class="w-5 h-5 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                            </svg>
                        </div>
                        <input type="password" class="input-field w-full pl-10 pr-4 py-3 rounded-lg text-base text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="请输入密码">
                    </div>

                    <!-- Confirm Password Input -->
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <svg class="w-5 h-5 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                            </svg>
                        </div>
                        <input type="password" class="input-field w-full pl-10 pr-4 py-3 rounded-lg text-base text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="请确认密码">
                    </div>

                    <!-- Verification Code -->
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <svg class="w-5 h-5 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                        <input type="text" class="input-field w-full pl-10 pr-24 py-3 rounded-lg text-base text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="请输入短信验证码">
                        <button onclick="sendRegisterCode()" class="absolute inset-y-0 right-0 pr-3 flex items-center text-indigo-500 hover:text-indigo-600 text-sm font-medium">
                            发送验证码
                        </button>
                    </div>

                    <!-- Agreement -->
                    <div class="flex items-start text-sm">
                        <input type="checkbox" class="rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 mt-0.5">
                        <span class="ml-2 text-gray-600 dark:text-gray-400">我已阅读并同意 
                            <button class="text-indigo-500 hover:text-indigo-600">《用户协议》</button> 和 
                            <button class="text-indigo-500 hover:text-indigo-600">《隐私政策》</button>
                        </span>
                    </div>

                    <!-- Register Button -->
                    <button onclick="handleRegister()" class="w-full bg-indigo-500 hover:bg-indigo-600 text-white py-3 rounded-full font-medium text-base transition-colors">
                        注册
                    </button>

                    <!-- Back to login -->
                    <div class="text-center">
                        <p class="text-gray-600 dark:text-gray-400">已有账号？<button onclick="goBackToLogin()" class="text-indigo-500 hover:text-indigo-600">立即登录</button></p>
                    </div>
                </div>
            </div>

            <!-- Home Page -->
            <div id="homePage" class="hidden fixed inset-0 bg-gray-100 dark:bg-gray-900">
                <div class="h-full overflow-y-auto max-w-md mx-auto">
                    <!-- Header -->
                    <div class="bg-white dark:bg-gray-800 rounded-b-3xl shadow-sm mb-4">
                        <div class="px-6 py-6">
                            <div class="flex items-center justify-between mb-4">
                                <div>
                                    <h1 class="text-2xl font-bold text-gray-900 dark:text-white">海虔家</h1>
                                    <p class="text-sm text-gray-500 dark:text-gray-400">智能设备 5台在线</p>
                                </div>
                                <div class="flex items-center space-x-3">
                                    <button onclick="showAddDevice()" class="w-10 h-10 bg-indigo-500 rounded-full flex items-center justify-center shadow-lg hover:bg-indigo-600 transition-colors">
                                        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                                        </svg>
                                    </button>
                                    <button onclick="logout()" class="w-10 h-10 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors">
                                        <svg class="w-5 h-5 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
                                        </svg>
                                    </button>
                                </div>
                            </div>

                            <!-- Weather & Status Cards -->
                            <div class="grid grid-cols-2 gap-3">
                                <div class="bg-gradient-to-br from-indigo-400 to-indigo-500 rounded-2xl p-4 text-white">
                                    <div class="flex items-center mb-2">
                                        <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M12 5.38c-3.87 0-7 3.13-7 7s3.13 7 7 7 7-3.13 7-7-3.13-7-7-7z"></path>
                                        </svg>
                                        <span class="text-sm font-medium">天气</span>
                                    </div>
                                    <div class="text-xl font-bold">22°C</div>
                                    <div class="text-xs opacity-90">多云转晴</div>
                                </div>

                                <div class="bg-gray-50 dark:bg-gray-700 rounded-2xl p-4">
                                    <div class="flex items-center mb-2">
                                        <svg class="w-6 h-6 mr-2 text-green-500" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M13 2.05v3.03c3.39.49 6 3.39 6 6.92 0 .9-.18 1.75-.48 2.54l2.6 1.53c.56-1.24.88-2.62.88-4.07 0-5.18-3.95-9.45-9-9.95z"></path>
                                        </svg>
                                        <span class="text-sm font-medium text-gray-700 dark:text-gray-300">能耗</span>
                                    </div>
                                    <div class="text-xl font-bold text-gray-900 dark:text-white">2.3kW</div>
                                    <div class="text-xs text-gray-500 dark:text-gray-400">今日消耗</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Device Section -->
                    <div class="px-4 pb-20">
                        <!-- Room Filter -->
                        <div class="flex space-x-2 mb-4 overflow-x-auto">
                            <button onclick="switchRoom('all')" class="room-tab px-4 py-2 bg-indigo-500 text-white rounded-full text-sm font-medium whitespace-nowrap active">全部</button>
                            <button onclick="switchRoom('living')" class="room-tab px-4 py-2 bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 rounded-full text-sm font-medium whitespace-nowrap border border-gray-200 dark:border-gray-700">客厅</button>
                            <button onclick="switchRoom('bedroom')" class="room-tab px-4 py-2 bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 rounded-full text-sm font-medium whitespace-nowrap border border-gray-200 dark:border-gray-700">卧室</button>
                            <button onclick="switchRoom('kitchen')" class="room-tab px-4 py-2 bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 rounded-full text-sm font-medium whitespace-nowrap border border-gray-200 dark:border-gray-700">厨房</button>
                        </div>

                        <!-- Device Grid -->
                        <div id="deviceGrid" class="grid grid-cols-2 gap-3">
                            <!-- Light Device 1 -->
                            <div class="device-card bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-gray-700" data-room="living">
                                <div class="flex items-start justify-between mb-3">
                                    <div class="w-10 h-10 bg-yellow-100 dark:bg-yellow-900/30 rounded-xl flex items-center justify-center">
                                        <svg class="w-5 h-5 text-yellow-600 dark:text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                                        </svg>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" class="sr-only peer" checked="" onclick="toggleDevice(this)">
                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-indigo-500"></div>
                                    </label>
                                </div>
                                <h3 class="font-medium text-gray-900 dark:text-white mb-1 cursor-pointer" onclick="showDeviceDetail('light')">客厅主灯</h3>
                                <p class="text-xs text-gray-500 dark:text-gray-400 mb-2">亮度 80%</p>
                                <div class="flex items-center">
                                    <div class="w-2 h-2 bg-green-500 rounded-full mr-2"></div>
                                    <span class="text-xs text-green-600 dark:text-green-400">在线</span>
                                </div>
                            </div>

                            <!-- Light Device 2 -->
                            <div class="device-card bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-gray-700" data-room="bedroom">
                                <div class="flex items-start justify-between mb-3">
                                    <div class="w-10 h-10 bg-yellow-100 dark:bg-yellow-900/30 rounded-xl flex items-center justify-center">
                                        <svg class="w-5 h-5 text-yellow-600 dark:text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                                        </svg>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" class="sr-only peer" onclick="toggleDevice(this)">
                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-indigo-500"></div>
                                    </label>
                                </div>
                                <h3 class="font-medium text-gray-900 dark:text-white mb-1 cursor-pointer" onclick="showDeviceDetail('light')">卧室台灯</h3>
                                <p class="text-xs text-gray-500 dark:text-gray-400 mb-2">亮度 60%</p>
                                <div class="flex items-center">
                                    <div class="w-2 h-2 bg-gray-400 rounded-full mr-2"></div>
                                    <span class="text-xs text-gray-500 dark:text-gray-400">离线</span>
                                </div>
                            </div>

                            <!-- Socket Device 1 -->
                            <div class="device-card bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-gray-700" data-room="kitchen">
                                <div class="flex items-start justify-between mb-3">
                                    <div class="w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-xl flex items-center justify-center">
                                        <svg class="w-5 h-5 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                        </svg>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" class="sr-only peer" checked="" onclick="toggleDevice(this)">
                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-indigo-500"></div>
                                    </label>
                                </div>
                                <h3 class="font-medium text-gray-900 dark:text-white mb-1 cursor-pointer" onclick="showDeviceDetail('socket')">厨房插座</h3>
                                <p class="text-xs text-gray-500 dark:text-gray-400 mb-2">功率 120W</p>
                                <div class="flex items-center">
                                    <div class="w-2 h-2 bg-green-500 rounded-full mr-2"></div>
                                    <span class="text-xs text-green-600 dark:text-green-400">在线</span>
                                </div>
                            </div>

                            <!-- Socket Device 2 -->
                            <div class="device-card bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-gray-700" data-room="living">
                                <div class="flex items-start justify-between mb-3">
                                    <div class="w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-xl flex items-center justify-center">
                                        <svg class="w-5 h-5 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                        </svg>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" class="sr-only peer" checked="" onclick="toggleDevice(this)">
                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-indigo-500"></div>
                                    </label>
                                </div>
                                <h3 class="font-medium text-gray-900 dark:text-white mb-1 cursor-pointer" onclick="showDeviceDetail('socket')">客厅插座</h3>
                                <p class="text-xs text-gray-500 dark:text-gray-400 mb-2">功率 85W</p>
                                <div class="flex items-center">
                                    <div class="w-2 h-2 bg-green-500 rounded-full mr-2"></div>
                                    <span class="text-xs text-green-600 dark:text-green-400">在线</span>
                                </div>
                            </div>

                            <!-- AC Device -->
                            <div class="device-card bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-gray-700" data-room="living">
                                <div class="flex items-start justify-between mb-3">
                                    <div class="w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-xl flex items-center justify-center">
                                        <svg class="w-5 h-5 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"></path>
                                        </svg>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" class="sr-only peer" onclick="toggleDevice(this)">
                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-indigo-500"></div>
                                    </label>
                                </div>
                                <h3 class="font-medium text-gray-900 dark:text-white mb-1 cursor-pointer" onclick="showDeviceDetail('ac')">客厅空调</h3>
                                <p class="text-xs text-gray-500 dark:text-gray-400 mb-2">制冷 26°C</p>
                                <div class="flex items-center">
                                    <div class="w-2 h-2 bg-gray-400 rounded-full mr-2"></div>
                                    <span class="text-xs text-gray-500 dark:text-gray-400">离线</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Bottom Navigation -->
                    <div class="fixed bottom-0 left-1/2 transform -translate-x-1/2 w-full max-w-md bg-white dark:bg-gray-800 border-t border-gray-100 dark:border-gray-700">
                        <div class="flex justify-around items-center py-3">
                            <button onclick="switchToTab('home')" class="nav-btn flex flex-col items-center py-1 px-4 text-indigo-500">
                                <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                                </svg>
                                <span class="text-xs">首页</span>
                            </button>
                            <button onclick="switchToTab('devices')" class="nav-btn flex flex-col items-center py-1 px-4 text-gray-400 dark:text-gray-500">
                                <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"></path>
                                </svg>
                                <span class="text-xs">设备</span>
                            </button>
                            <button onclick="switchToTab('scenes')" class="nav-btn flex flex-col items-center py-1 px-4 text-gray-400 dark:text-gray-500">
                                <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                                </svg>
                                <span class="text-xs">智能</span>
                            </button>
                            <button onclick="switchToTab('profile')" class="nav-btn flex flex-col items-center py-1 px-4 text-gray-400 dark:text-gray-500">
                                <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                </svg>
                                <span class="text-xs">我的</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Devices Page -->
            <div id="devicesPage" class="hidden fixed inset-0 bg-gray-100 dark:bg-gray-900">
                <div class="h-full overflow-y-auto max-w-md mx-auto">
                    <div class="bg-white dark:bg-gray-800 rounded-b-3xl shadow-sm mb-4">
                        <div class="px-6 py-6">
                            <div class="flex items-center justify-between">
                                <h1 class="text-2xl font-bold text-gray-900 dark:text-white">设备管理</h1>
                                <button onclick="showAddDevice()" class="w-10 h-10 bg-indigo-500 rounded-full flex items-center justify-center shadow-lg hover:bg-indigo-600 transition-colors">
                                    <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="px-4 pb-20">
                        <!-- Device Categories -->
                        <div class="grid grid-cols-3 gap-3 mb-6">
                            <button class="bg-white dark:bg-gray-800 rounded-2xl p-4 text-center shadow-sm border border-gray-100 dark:border-gray-700">
                                <div class="w-12 h-12 bg-yellow-100 dark:bg-yellow-900/30 rounded-xl flex items-center justify-center mx-auto mb-2">
                                    <svg class="w-6 h-6 text-yellow-600 dark:text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                                    </svg>
                                </div>
                                <div class="text-sm font-medium text-gray-900 dark:text-white">照明</div>
                                <div class="text-xs text-gray-500 dark:text-gray-400">4台</div>
                            </button>

                            <button class="bg-white dark:bg-gray-800 rounded-2xl p-4 text-center shadow-sm border border-gray-100 dark:border-gray-700">
                                <div class="w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-xl flex items-center justify-center mx-auto mb-2">
                                    <svg class="w-6 h-6 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"></path>
                                    </svg>
                                </div>
                                <div class="text-sm font-medium text-gray-900 dark:text-white">空调</div>
                                <div class="text-xs text-gray-500 dark:text-gray-400">2台</div>
                            </button>

                            <button class="bg-white dark:bg-gray-800 rounded-2xl p-4 text-center shadow-sm border border-gray-100 dark:border-gray-700">
                                <div class="w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-xl flex items-center justify-center mx-auto mb-2">
                                    <svg class="w-6 h-6 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                    </svg>
                                </div>
                                <div class="text-sm font-medium text-gray-900 dark:text-white">插座</div>
                                <div class="text-xs text-gray-500 dark:text-gray-400">3台</div>
                            </button>
                        </div>

                        <!-- Device List -->
                        <div class="space-y-3">
                            <div class="bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-gray-700">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-12 h-12 bg-yellow-100 dark:bg-yellow-900/30 rounded-xl flex items-center justify-center">
                                            <svg class="w-6 h-6 text-yellow-600 dark:text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                                            </svg>
                                        </div>
                                        <div>
                                            <div class="font-medium text-gray-900 dark:text-white">客厅主灯</div>
                                            <div class="text-sm text-gray-500 dark:text-gray-400 flex items-center">
                                                <div class="w-2 h-2 bg-green-500 rounded-full mr-2"></div>
                                                客厅 • 在线 • 亮度80%
                                            </div>
                                        </div>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" class="sr-only peer" checked="" onclick="toggleDevice(this)">
                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-indigo-500"></div>
                                    </label>
                                </div>
                            </div>

                            <div class="bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-gray-700">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-xl flex items-center justify-center">
                                            <svg class="w-6 h-6 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"></path>
                                            </svg>
                                        </div>
                                        <div>
                                            <div class="font-medium text-gray-900 dark:text-white">客厅空调</div>
                                            <div class="text-sm text-gray-500 dark:text-gray-400 flex items-center">
                                                <div class="w-2 h-2 bg-gray-400 rounded-full mr-2"></div>
                                                客厅 • 离线
                                            </div>
                                        </div>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" class="sr-only peer" onclick="toggleDevice(this)">
                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-indigo-500"></div>
                                    </label>
                                </div>
                            </div>

                            <div class="bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-gray-700">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-xl flex items-center justify-center">
                                            <svg class="w-6 h-6 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                            </svg>
                                        </div>
                                        <div>
                                            <div class="font-medium text-gray-900 dark:text-white">厨房插座</div>
                                            <div class="text-sm text-gray-500 dark:text-gray-400 flex items-center">
                                                <div class="w-2 h-2 bg-green-500 rounded-full mr-2"></div>
                                                厨房 • 在线 • 120W
                                            </div>
                                        </div>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" class="sr-only peer" checked="" onclick="toggleDevice(this)">
                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-indigo-500"></div>
                                    </label>
                                </div>
                            </div>

                            <div class="bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-gray-700">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-xl flex items-center justify-center">
                                            <svg class="w-6 h-6 text-purple-600 dark:text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                                            </svg>
                                        </div>
                                        <div>
                                            <div class="font-medium text-gray-900 dark:text-white">卧室摄像头</div>
                                            <div class="text-sm text-gray-500 dark:text-gray-400 flex items-center">
                                                <div class="w-2 h-2 bg-green-500 rounded-full mr-2"></div>
                                                卧室 • 在线 • 1080P
                                            </div>
                                        </div>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" class="sr-only peer" checked="" onclick="toggleDevice(this)">
                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-indigo-500"></div>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Bottom Navigation -->
                    <div class="fixed bottom-0 left-1/2 transform -translate-x-1/2 w-full max-w-md bg-white dark:bg-gray-800 border-t border-gray-100 dark:border-gray-700">
                        <div class="flex justify-around items-center py-3">
                            <button onclick="switchToTab('home')" class="nav-btn flex flex-col items-center py-1 px-4 text-gray-400 dark:text-gray-500">
                                <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                                </svg>
                                <span class="text-xs">首页</span>
                            </button>
                            <button onclick="switchToTab('devices')" class="nav-btn flex flex-col items-center py-1 px-4 text-indigo-500">
                                <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"></path>
                                </svg>
                                <span class="text-xs">设备</span>
                            </button>
                            <button onclick="switchToTab('scenes')" class="nav-btn flex flex-col items-center py-1 px-4 text-gray-400 dark:text-gray-500">
                                <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                                </svg>
                                <span class="text-xs">智能</span>
                            </button>
                            <button onclick="switchToTab('profile')" class="nav-btn flex flex-col items-center py-1 px-4 text-gray-400 dark:text-gray-500">
                                <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                </svg>
                                <span class="text-xs">我的</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Scenes Page -->
            <div id="scenesPage" class="hidden fixed inset-0 bg-gray-100 dark:bg-gray-900">
                <div class="h-full overflow-y-auto max-w-md mx-auto">
                    <div class="bg-white dark:bg-gray-800 rounded-b-3xl shadow-sm mb-4">
                        <div class="px-6 py-6">
                            <div class="flex items-center justify-between">
                                <h1 class="text-2xl font-bold text-gray-900 dark:text-white">智能场景</h1>
                                <button onclick="showAddScene()" class="w-10 h-10 bg-indigo-500 rounded-full flex items-center justify-center shadow-lg hover:bg-indigo-600 transition-colors">
                                    <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="px-4 pb-20">
                        <!-- Quick Scene Actions -->
                        <div class="mb-6">
                            <h2 class="text-lg font-semibold text-gray-900 dark:text-white mb-3">快捷场景</h2>
                            <div class="grid grid-cols-2 gap-3">
                                <button onclick="executeScene('home')" class="bg-gradient-to-r from-green-400 to-green-500 rounded-2xl p-4 text-white shadow-lg">
                                    <div class="flex items-center justify-between mb-2">
                                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                                        </svg>
                                        <span class="text-xs opacity-90">2个设备</span>
                                    </div>
                                    <div class="text-left">
                                        <div class="font-medium">回家模式</div>
                                        <div class="text-xs opacity-90">开启客厅灯光和空调</div>
                                    </div>
                                </button>

                                <button onclick="executeScene('away')" class="bg-gradient-to-r from-orange-400 to-orange-500 rounded-2xl p-4 text-white shadow-lg">
                                    <div class="flex items-center justify-between mb-2">
                                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
                                        </svg>
                                        <span class="text-xs opacity-90">5个设备</span>
                                    </div>
                                    <div class="text-left">
                                        <div class="font-medium">离家模式</div>
                                        <div class="text-xs opacity-90">关闭所有设备</div>
                                    </div>
                                </button>

                                <button onclick="executeScene('sleep')" class="bg-gradient-to-r from-purple-400 to-purple-500 rounded-2xl p-4 text-white shadow-lg">
                                    <div class="flex items-center justify-between mb-2">
                                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
                                        </svg>
                                        <span class="text-xs opacity-90">3个设备</span>
                                    </div>
                                    <div class="text-left">
                                        <div class="font-medium">睡眠模式</div>
                                        <div class="text-xs opacity-90">关闭灯光，调节温度</div>
                                    </div>
                                </button>

                                <button onclick="executeScene('movie')" class="bg-gradient-to-r from-blue-400 to-blue-500 rounded-2xl p-4 text-white shadow-lg">
                                    <div class="flex items-center justify-between mb-2">
                                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                                        </svg>
                                        <span class="text-xs opacity-90">4个设备</span>
                                    </div>
                                    <div class="text-left">
                                        <div class="font-medium">观影模式</div>
                                        <div class="text-xs opacity-90">调暗灯光，开启音响</div>
                                    </div>
                                </button>
                            </div>
                        </div>

                        <!-- Custom Scenes -->
                        <div class="mb-6">
                            <h2 class="text-lg font-semibold text-gray-900 dark:text-white mb-3">自定义场景</h2>
                            <div class="space-y-3">
                                <!-- Scene Item 1 -->
                                <div class="bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-gray-700">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center space-x-3">
                                            <div class="w-12 h-12 bg-yellow-100 dark:bg-yellow-900/30 rounded-xl flex items-center justify-center">
                                                <svg class="w-6 h-6 text-yellow-600 dark:text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                                                </svg>
                                            </div>
                                            <div>
                                                <div class="font-medium text-gray-900 dark:text-white">晨起模式</div>
                                                <div class="text-sm text-gray-500 dark:text-gray-400">工作日 07:00 • 3个设备</div>
                                            </div>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" class="sr-only peer" checked="" onclick="toggleScene(this)">
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-indigo-500"></div>
                                        </label>
                                    </div>
                                </div>

                                <!-- Scene Item 2 -->
                                <div class="bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-gray-700">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center space-x-3">
                                            <div class="w-12 h-12 bg-red-100 dark:bg-red-900/30 rounded-xl flex items-center justify-center">
                                                <svg class="w-6 h-6 text-red-600 dark:text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                                                </svg>
                                            </div>
                                            <div>
                                                <div class="font-medium text-gray-900 dark:text-white">安全模式</div>
                                                <div class="text-sm text-gray-500 dark:text-gray-400">离家时自动执行 • 2个设备</div>
                                            </div>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" class="sr-only peer" onclick="toggleScene(this)">
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-indigo-500"></div>
                                        </label>
                                    </div>
                                </div>

                                <!-- Scene Item 3 -->
                                <div class="bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-gray-700">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center space-x-3">
                                            <div class="w-12 h-12 bg-pink-100 dark:bg-pink-900/30 rounded-xl flex items-center justify-center">
                                                <svg class="w-6 h-6 text-pink-600 dark:text-pink-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                                                </svg>
                                            </div>
                                            <div>
                                                <div class="font-medium text-gray-900 dark:text-white">浪漫模式</div>
                                                <div class="text-sm text-gray-500 dark:text-gray-400">手动执行 • 4个设备</div>
                                            </div>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" class="sr-only peer" checked="" onclick="toggleScene(this)">
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-indigo-500"></div>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Automation Rules -->
                        <div class="mb-6">
                            <h2 class="text-lg font-semibold text-gray-900 dark:text-white mb-3">自动化规则</h2>
                            <div class="space-y-3">
                                <div class="bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-gray-700">
                                    <div class="flex items-start justify-between">
                                        <div class="flex-1">
                                            <div class="font-medium text-gray-900 dark:text-white mb-1">当检测到有人回家时</div>
                                            <div class="text-sm text-gray-500 dark:text-gray-400 mb-2">
                                                自动开启客厅主灯和玄关灯
                                            </div>
                                            <div class="flex items-center space-x-2">
                                                <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                                <span class="text-xs text-green-600 dark:text-green-400">已启用</span>
                                            </div>
                                        </div>
                                        <button onclick="editAutomation(1)" class="p-2 text-gray-400 hover:text-gray-600">
                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path>
                                            </svg>
                                        </button>
                                    </div>
                                </div>

                                <div class="bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-gray-700">
                                    <div class="flex items-start justify-between">
                                        <div class="flex-1">
                                            <div class="font-medium text-gray-900 dark:text-white mb-1">每天晚上10点</div>
                                            <div class="text-sm text-gray-500 dark:text-gray-400 mb-2">
                                                自动关闭所有灯光，调低空调温度
                                            </div>
                                            <div class="flex items-center space-x-2">
                                                <div class="w-2 h-2 bg-gray-400 rounded-full"></div>
                                                <span class="text-xs text-gray-500 dark:text-gray-400">已暂停</span>
                                            </div>
                                        </div>
                                        <button onclick="editAutomation(2)" class="p-2 text-gray-400 hover:text-gray-600">
                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Bottom Navigation -->
                    <div class="fixed bottom-0 left-1/2 transform -translate-x-1/2 w-full max-w-md bg-white dark:bg-gray-800 border-t border-gray-100 dark:border-gray-700">
                        <div class="flex justify-around items-center py-3">
                            <button onclick="switchToTab('home')" class="nav-btn flex flex-col items-center py-1 px-4 text-gray-400 dark:text-gray-500">
                                <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                                </svg>
                                <span class="text-xs">首页</span>
                            </button>
                            <button onclick="switchToTab('devices')" class="nav-btn flex flex-col items-center py-1 px-4 text-gray-400 dark:text-gray-500">
                                <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"></path>
                                </svg>
                                <span class="text-xs">设备</span>
                            </button>
                            <button onclick="switchToTab('scenes')" class="nav-btn flex flex-col items-center py-1 px-4 text-indigo-500">
                                <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                                </svg>
                                <span class="text-xs">智能</span>
                            </button>
                            <button onclick="switchToTab('profile')" class="nav-btn flex flex-col items-center py-1 px-4 text-gray-400 dark:text-gray-500">
                                <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                </svg>
                                <span class="text-xs">我的</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Profile Page -->
            <div id="profilePage" class="hidden fixed inset-0 bg-gray-100 dark:bg-gray-900">
                <div class="h-full overflow-y-auto max-w-md mx-auto">
                    <div class="bg-white dark:bg-gray-800 rounded-b-3xl shadow-sm mb-4">
                        <div class="px-6 py-6">
                            <h1 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">我的</h1>
                            
                            <!-- User Profile Card -->
                            <div class="flex items-center space-x-4 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-2xl p-4 text-white">
                                <div class="w-16 h-16 bg-white/20 rounded-full flex items-center justify-center">
                                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                    </svg>
                                </div>
                                <div class="flex-1">
                                    <div class="font-semibold text-lg">管理员</div>
                                    <div class="text-sm opacity-90">admin@example.com</div>
                                    <div class="text-xs opacity-80">会员等级：VIP</div>
                                </div>
                                <button onclick="editProfile()" class="p-2 bg-white/20 rounded-full hover:bg-white/30 transition-colors">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="px-4 pb-20">
                        <!-- Quick Stats -->
                        <div class="grid grid-cols-3 gap-3 mb-6">
                            <div class="bg-white dark:bg-gray-800 rounded-2xl p-4 text-center shadow-sm border border-gray-100 dark:border-gray-700">
                                <div class="text-2xl font-bold text-indigo-500 mb-1">9</div>
                                <div class="text-xs text-gray-500 dark:text-gray-400">设备总数</div>
                            </div>
                            <div class="bg-white dark:bg-gray-800 rounded-2xl p-4 text-center shadow-sm border border-gray-100 dark:border-gray-700">
                                <div class="text-2xl font-bold text-green-500 mb-1">6</div>
                                <div class="text-xs text-gray-500 dark:text-gray-400">在线设备</div>
                            </div>
                            <div class="bg-white dark:bg-gray-800 rounded-2xl p-4 text-center shadow-sm border border-gray-100 dark:border-gray-700">
                                <div class="text-2xl font-bold text-orange-500 mb-1">5</div>
                                <div class="text-xs text-gray-500 dark:text-gray-400">智能场景</div>
                            </div>
                        </div>

                        <!-- Settings Menu -->
                        <div class="space-y-3">
                            <!-- Account Settings -->
                            <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700">
                                <button onclick="showAccountSettings()" class="w-full flex items-center justify-between p-4 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-2xl transition-colors">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-xl flex items-center justify-center">
                                            <svg class="w-5 h-5 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                            </svg>
                                        </div>
                                        <div class="text-left">
                                            <div class="font-medium text-gray-900 dark:text-white">账号设置</div>
                                            <div class="text-sm text-gray-500 dark:text-gray-400">个人信息、密码、绑定</div>
                                        </div>
                                    </div>
                                    <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                    </svg>
                                </button>
                            </div>

                            <!-- Device Management -->
                            <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700">
                                <button onclick="showDeviceSettings()" class="w-full flex items-center justify-between p-4 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-2xl transition-colors">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-xl flex items-center justify-center">
                                            <svg class="w-5 h-5 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                            </svg>
                                        </div>
                                        <div class="text-left">
                                            <div class="font-medium text-gray-900 dark:text-white">设备管理</div>
                                            <div class="text-sm text-gray-500 dark:text-gray-400">设备配置、共享、权限</div>
                                        </div>
                                    </div>
                                    <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                    </svg>
                                </button>
                            </div>

                            <!-- Notifications -->
                            <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700">
                                <button onclick="showNotificationSettings()" class="w-full flex items-center justify-between p-4 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-2xl transition-colors">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-10 h-10 bg-yellow-100 dark:bg-yellow-900/30 rounded-xl flex items-center justify-center">
                                            <svg class="w-5 h-5 text-yellow-600 dark:text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5 5v-5zM10.07 2.82l3.12 7.48 7.48 3.12a1 1 0 010 1.16l-7.48 3.12-3.12 7.48a1 1 0 01-1.16 0L5.8 21.07l-3.12-7.48a1 1 0 010-1.16l7.48-3.12L13.28 1.8a1 1 0 011.16 0z"></path>
                                            </svg>
                                        </div>
                                        <div class="text-left">
                                            <div class="font-medium text-gray-900 dark:text-white">通知设置</div>
                                            <div class="text-sm text-gray-500 dark:text-gray-400">推送、提醒、消息</div>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <div class="w-2 h-2 bg-red-500 rounded-full"></div>
                                        <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                        </svg>
                                    </div>
                                </button>
                            </div>

                            <!-- Privacy & Security -->
                            <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700">
                                <button onclick="showPrivacySettings()" class="w-full flex items-center justify-between p-4 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-2xl transition-colors">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-xl flex items-center justify-center">
                                            <svg class="w-5 h-5 text-red-600 dark:text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                                            </svg>
                                        </div>
                                        <div class="text-left">
                                            <div class="font-medium text-gray-900 dark:text-white">隐私与安全</div>
                                            <div class="text-sm text-gray-500 dark:text-gray-400">数据保护、安全验证</div>
                                        </div>
                                    </div>
                                    <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                    </svg>
                                </button>
                            </div>

                            <!-- App Settings -->
                            <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700">
                                <button onclick="showAppSettings()" class="w-full flex items-center justify-between p-4 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-2xl transition-colors">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-10 h-10 bg-purple-100 dark:bg-purple-900/30 rounded-xl flex items-center justify-center">
                                            <svg class="w-5 h-5 text-purple-600 dark:text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100-4m0 4v2m0-6V4"></path>
                                            </svg>
                                        </div>
                                        <div class="text-left">
                                            <div class="font-medium text-gray-900 dark:text-white">应用设置</div>
                                            <div class="text-sm text-gray-500 dark:text-gray-400">主题、语言、缓存</div>
                                        </div>
                                    </div>
                                    <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                    </svg>
                                </button>
                            </div>

                            <!-- Help & Support -->
                            <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700">
                                <button onclick="showHelpSupport()" class="w-full flex items-center justify-between p-4 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-2xl transition-colors">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-10 h-10 bg-cyan-100 dark:bg-cyan-900/30 rounded-xl flex items-center justify-center">
                                            <svg class="w-5 h-5 text-cyan-600 dark:text-cyan-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                            </svg>
                                        </div>
                                        <div class="text-left">
                                            <div class="font-medium text-gray-900 dark:text-white">帮助与支持</div>
                                            <div class="text-sm text-gray-500 dark:text-gray-400">用户手册、在线客服</div>
                                        </div>
                                    </div>
                                    <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                    </svg>
                                </button>
                            </div>

                            <!-- About -->
                            <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700">
                                <button onclick="showAbout()" class="w-full flex items-center justify-between p-4 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-2xl transition-colors">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-10 h-10 bg-gray-100 dark:bg-gray-700 rounded-xl flex items-center justify-center">
                                            <svg class="w-5 h-5 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                            </svg>
                                        </div>
                                        <div class="text-left">
                                            <div class="font-medium text-gray-900 dark:text-white">关于应用</div>
                                            <div class="text-sm text-gray-500 dark:text-gray-400">版本信息、更新日志</div>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <span class="text-xs text-gray-400">v2.1.0</span>
                                        <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                        </svg>
                                    </div>
                                </button>
                            </div>
                        </div>

                        <!-- Logout Button -->
                        <div class="mt-8">
                            <button onclick="confirmLogout()" class="w-full bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400 py-4 rounded-2xl font-medium transition-colors">
                                <div class="flex items-center justify-center space-x-2">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
                                    </svg>
                                    <span>退出登录</span>
                                </div>
                            </button>
                        </div>
                    </div>
                    <!-- Bottom Navigation -->
                    <div class="fixed bottom-0 left-1/2 transform -translate-x-1/2 w-full max-w-md bg-white dark:bg-gray-800 border-t border-gray-100 dark:border-gray-700">
                        <div class="flex justify-around items-center py-3">
                            <button onclick="switchToTab('home')" class="nav-btn flex flex-col items-center py-1 px-4 text-gray-400 dark:text-gray-500">
                                <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                                </svg>
                                <span class="text-xs">首页</span>
                            </button>
                            <button onclick="switchToTab('devices')" class="nav-btn flex flex-col items-center py-1 px-4 text-gray-400 dark:text-gray-500">
                                <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"></path>
                                </svg>
                                <span class="text-xs">设备</span>
                            </button>
                            <button onclick="switchToTab('scenes')" class="nav-btn flex flex-col items-center py-1 px-4 text-gray-400 dark:text-gray-500">
                                <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                                </svg>
                                <span class="text-xs">智能</span>
                            </button>
                            <button onclick="switchToTab('profile')" class="nav-btn flex flex-col items-center py-1 px-4 text-indigo-500">
                                <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                </svg>
                                <span class="text-xs">我的</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Light Detail Page -->
            <div id="lightDetailPage" class="hidden fixed inset-0 bg-gray-100 dark:bg-gray-900">
                <div class="h-full overflow-y-auto">
                    <div class="bg-white dark:bg-gray-800 rounded-b-3xl shadow-sm mb-4">
                        <div class="px-6 py-6">
                            <div class="flex items-center justify-between mb-4">
                                <button onclick="goBackToHome()" class="w-10 h-10 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center">
                                    <svg class="w-5 h-5 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                                    </svg>
                                </button>
                                <h1 class="text-xl font-bold text-gray-900 dark:text-white">客厅主灯</h1>
                                <div class="w-10"></div>
                            </div>
                            
                            <div class="text-center">
                                <div class="w-20 h-20 bg-yellow-100 dark:bg-yellow-900/30 rounded-3xl flex items-center justify-center mx-auto mb-4">
                                    <svg class="w-10 h-10 text-yellow-600 dark:text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                                    </svg>
                                </div>
                                <div class="flex items-center justify-center mb-2">
                                    <div class="w-2 h-2 bg-green-500 rounded-full mr-2"></div>
                                    <span class="text-sm text-green-600 dark:text-green-400">在线</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="px-4 pb-20">
                        <!-- Switch Control -->
                        <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 mb-4">
                            <div class="flex items-center justify-between">
                                <span class="text-lg font-medium text-gray-900 dark:text-white">开关</span>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" class="sr-only peer" checked="" onclick="toggleDevice(this)">
                                    <div class="w-14 h-8 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-600 peer-checked:after:translate-x-6 peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-7 after:w-7 after:transition-all dark:border-gray-600 peer-checked:bg-indigo-500"></div>
                                </label>
                            </div>
                        </div>

                        <!-- Brightness Control -->
                        <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 mb-4">
                            <div class="mb-4">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-lg font-medium text-gray-900 dark:text-white">亮度</span>
                                    <span class="text-sm text-gray-500 dark:text-gray-400" id="brightnessValue">80%</span>
                                </div>
                                <input type="range" min="0" max="100" value="80" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700" onchange="updateBrightness(this.value)">
                            </div>
                        </div>

                        <!-- Color Control -->
                        <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 mb-4">
                            <div class="mb-4">
                                <span class="text-lg font-medium text-gray-900 dark:text-white mb-4 block">颜色</span>
                                <div class="grid grid-cols-6 gap-3">
                                    <button class="w-8 h-8 bg-white border-2 border-gray-300 rounded-full"></button>
                                    <button class="w-8 h-8 bg-yellow-400 rounded-full"></button>
                                    <button class="w-8 h-8 bg-orange-400 rounded-full"></button>
                                    <button class="w-8 h-8 bg-red-400 rounded-full"></button>
                                    <button class="w-8 h-8 bg-purple-400 rounded-full"></button>
                                    <button class="w-8 h-8 bg-blue-400 rounded-full"></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- AC Detail Page -->
            <div id="acDetailPage" class="hidden fixed inset-0 bg-gray-100 dark:bg-gray-900">
                <div class="h-full overflow-y-auto">
                    <div class="bg-white dark:bg-gray-800 rounded-b-3xl shadow-sm mb-4">
                        <div class="px-6 py-6">
                            <div class="flex items-center justify-between mb-4">
                                <button onclick="goBackToHome()" class="w-10 h-10 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center">
                                    <svg class="w-5 h-5 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                                    </svg>
                                </button>
                                <h1 class="text-xl font-bold text-gray-900 dark:text-white">客厅空调</h1>
                                <div class="w-10"></div>
                            </div>
                            
                            <div class="text-center">
                                <div class="w-20 h-20 bg-blue-100 dark:bg-blue-900/30 rounded-3xl flex items-center justify-center mx-auto mb-4">
                                    <svg class="w-10 h-10 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"></path>
                                    </svg>
                                </div>
                                <div class="flex items-center justify-center mb-2">
                                    <div class="w-2 h-2 bg-gray-400 rounded-full mr-2"></div>
                                    <span class="text-sm text-gray-500 dark:text-gray-400">离线</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="px-4 pb-20">
                        <!-- Switch Control -->
                        <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 mb-4">
                            <div class="flex items-center justify-between">
                                <span class="text-lg font-medium text-gray-900 dark:text-white">开关</span>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" class="sr-only peer" onclick="toggleDevice(this)">
                                    <div class="w-14 h-8 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-600 peer-checked:after:translate-x-6 peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-7 after:w-7 after:transition-all dark:border-gray-600 peer-checked:bg-indigo-500"></div>
                                </label>
                            </div>
                        </div>

                        <!-- Temperature Control -->
                        <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 mb-4">
                            <div class="mb-4">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-lg font-medium text-gray-900 dark:text-white">温度</span>
                                    <span class="text-sm text-gray-500 dark:text-gray-400" id="temperatureValue">26°C</span>
                                </div>
                                <input type="range" min="16" max="32" value="26" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700" onchange="updateTemperature(this.value)">
                                <div class="flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1">
                                    <span>16°C</span>
                                    <span>32°C</span>
                                </div>
                            </div>
                        </div>

                        <!-- Mode Control -->
                        <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 mb-4">
                            <div class="mb-4">
                                <span class="text-lg font-medium text-gray-900 dark:text-white mb-4 block">模式</span>
                                <div class="grid grid-cols-2 gap-3">
                                    <button class="px-4 py-3 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-xl font-medium" onclick="setACMode('cool')">制冷</button>
                                    <button class="px-4 py-3 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded-xl font-medium" onclick="setACMode('heat')">制热</button>
                                    <button class="px-4 py-3 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded-xl font-medium" onclick="setACMode('fan')">送风</button>
                                    <button class="px-4 py-3 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded-xl font-medium" onclick="setACMode('dry')">除湿</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Socket Detail Page -->
            <div id="socketDetailPage" class="hidden fixed inset-0 bg-gray-100 dark:bg-gray-900">
                <div class="h-full overflow-y-auto">
                    <div class="bg-white dark:bg-gray-800 rounded-b-3xl shadow-sm mb-4">
                        <div class="px-6 py-6">
                            <div class="flex items-center justify-between mb-4">
                                <button onclick="goBackToHome()" class="w-10 h-10 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center">
                                    <svg class="w-5 h-5 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                                    </svg>
                                </button>
                                <h1 class="text-xl font-bold text-gray-900 dark:text-white">厨房插座</h1>
                                <div class="w-10"></div>
                            </div>
                            
                            <div class="text-center">
                                <div class="w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-3xl flex items-center justify-center mx-auto mb-4">
                                    <svg class="w-10 h-10 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                    </svg>
                                </div>
                                <div class="flex items-center justify-center mb-2">
                                    <div class="w-2 h-2 bg-green-500 rounded-full mr-2"></div>
                                    <span class="text-sm text-green-600 dark:text-green-400">在线</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="px-4 pb-20">
                        <!-- Switch Control -->
                        <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 mb-4">
                            <div class="flex items-center justify-between">
                                <span class="text-lg font-medium text-gray-900 dark:text-white">开关</span>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" class="sr-only peer" checked="" onclick="toggleDevice(this)">
                                    <div class="w-14 h-8 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-600 peer-checked:after:translate-x-6 peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-7 after:w-7 after:transition-all dark:border-gray-600 peer-checked:bg-indigo-500"></div>
                                </label>
                            </div>
                        </div>

                        <!-- Power Monitoring -->
                        <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 mb-4">
                            <div class="mb-4">
                                <span class="text-lg font-medium text-gray-900 dark:text-white mb-4 block">功率监控</span>
                                <div class="grid grid-cols-2 gap-4">
                                    <div class="text-center">
                                        <div class="text-2xl font-bold text-gray-900 dark:text-white" id="currentPower">120W</div>
                                        <div class="text-xs text-gray-500 dark:text-gray-400">当前功率</div>
                                    </div>
                                    <div class="text-center">
                                        <div class="text-2xl font-bold text-gray-900 dark:text-white">2.3kWh</div>
                                        <div class="text-xs text-gray-500 dark:text-gray-400">今日用电</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Timer Control -->
                        <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 mb-4">
                            <div class="mb-4">
                                <span class="text-lg font-medium text-gray-900 dark:text-white mb-4 block">定时器</span>
                                <div class="flex items-center space-x-4">
                                    <button class="px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded-lg" onclick="setTimer(30)">30分钟</button>
                                    <button class="px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded-lg" onclick="setTimer(60)">1小时</button>
                                    <button class="px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded-lg" onclick="setTimer(120)">2小时</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Add Device Page -->
            <div id="addDevicePage" class="hidden fixed inset-0 bg-gray-100 dark:bg-gray-900">
                <div class="h-full overflow-y-auto">
                    <div class="bg-white dark:bg-gray-800 rounded-b-3xl shadow-sm mb-4">
                        <div class="px-6 py-6">
                            <div class="flex items-center justify-between">
                                <button onclick="goBackToHome()" class="w-10 h-10 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center">
                                    <svg class="w-5 h-5 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                                    </svg>
                                </button>
                                <h1 class="text-xl font-bold text-gray-900 dark:text-white">添加设备</h1>
                                <div class="w-10"></div>
                            </div>
                        </div>
                    </div>
                    <div class="px-4 pb-20">
                        <div class="text-center py-20">
                            <svg class="w-16 h-16 mx-auto mb-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                            </svg>
                            <p class="text-gray-500 dark:text-gray-400">添加设备页面</p>
                            <p class="text-sm text-gray-400 dark:text-gray-500 mt-2">扫描或手动添加新的智能设备</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentTab = 'home';
        let currentRoom = 'all';
        let brightness = 80;

        // Dark mode detection
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });

        function togglePassword() {
            const input = document.getElementById('loginPassword');
            const button = input.nextElementSibling;
            
            if (input.type === 'password') {
                input.type = 'text';
            } else {
                input.type = 'password';
            }
        }

        function goToRegister() {
            hideAllForms();
            document.getElementById('registerPage').classList.remove('hidden');
        }

        function showPhoneLogin() {
            hideAllForms();
            document.getElementById('phoneLoginPage').classList.remove('hidden');
        }

        function showWechatLogin() {
            hideAllForms();
            document.getElementById('wechatLoginPage').classList.remove('hidden');
        }

        function showForgotPassword() {
            hideAllForms();
            document.getElementById('forgotPasswordPage').classList.remove('hidden');
        }

        function handleLogin() {
            hideAllForms();
            switchToTab('home');
            document.title = '海虔家';
        }

        function hideAllForms() {
            document.getElementById('loginForm').classList.add('hidden');
        }

        function switchRoom(room) {
            currentRoom = room;
            
            // Update tab active state
            const tabs = document.querySelectorAll('.room-tab');
            tabs.forEach(tab => {
                tab.classList.remove('active');
                tab.style.background = '';
                tab.style.color = '';
            });
            
            event.target.classList.add('active');
            
            // Filter devices
            const devices = document.querySelectorAll('[data-room]');
            devices.forEach(device => {
                if (room === 'all' || device.getAttribute('data-room') === room) {
                    device.style.display = 'block';
                } else {
                    device.style.display = 'none';
                }
            });
        }

        function showDeviceDetail(deviceType) {
            hideAllPages();
            document.getElementById(deviceType + 'DetailPage').classList.remove('hidden');
        }

        function goBackToHome() {
            hideAllPages();
            switchToTab('home');
        }

        function updateBrightness(value) {
            brightness = value;
            document.getElementById('brightnessValue').textContent = value + '%';
        }

        // 修复的主要函数：页面切换
        function switchToTab(tab) {
            console.log('Switching to tab:', tab);
            
            // 隐藏所有页面
            hideAllPages();
            
            // 显示目标页面
            const targetPage = document.getElementById(tab + 'Page');
            if (targetPage) {
                targetPage.classList.remove('hidden');
                currentTab = tab;
                
                // 更新所有页面的导航状态
                updateAllNavigations(tab);
                
                console.log('Successfully switched to:', tab);
            } else {
                console.error('Page not found:', tab + 'Page');
            }
        }

        function updateAllNavigations(activeTab) {
            try {
                // 重置所有导航按钮
                const allNavButtons = document.querySelectorAll('.nav-btn');
                allNavButtons.forEach(btn => {
                    if (btn && btn.classList) {
                        btn.classList.remove('text-indigo-500');
                        btn.classList.add('text-gray-400', 'dark:text-gray-500');
                    }
                });

                // 激活当前标签的所有按钮
                const activeButtons = document.querySelectorAll(`button[onclick="switchToTab('${activeTab}')"]`);
                activeButtons.forEach(btn => {
                    if (btn && btn.classList) {
                        btn.classList.remove('text-gray-400', 'dark:text-gray-500');
                        btn.classList.add('text-indigo-500');
                    }
                });
            } catch (error) {
                console.warn('Navigation update error:', error);
            }
        }

        function showAddDevice() {
            hideAllPages();
            document.getElementById('addDevicePage').classList.remove('hidden');
        }

        function hideAllPages() {
            const allPages = ['homePage', 'devicesPage', 'scenesPage', 'profilePage', 'addDevicePage', 'lightDetailPage', 'acDetailPage', 'socketDetailPage'];
            allPages.forEach(page => {
                const element = document.getElementById(page);
                if (element) {
                    element.classList.add('hidden');
                }
            });
        }

        // 新增功能函数
        function updateTemperature(value) {
            document.getElementById('temperatureValue').textContent = value + '°C';
        }

        function setACMode(mode) {
            // 重置所有模式按钮
            const modeButtons = document.querySelectorAll('[onclick^="setACMode"]');
            modeButtons.forEach(btn => {
                btn.className = 'px-4 py-3 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded-xl font-medium';
            });
            
            // 激活当前模式
            event.target.className = 'px-4 py-3 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-xl font-medium';
        }

        function setTimer(minutes) {
            // 重置所有定时器按钮
            const timerButtons = document.querySelectorAll('[onclick^="setTimer"]');
            timerButtons.forEach(btn => {
                btn.className = 'px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded-lg';
            });
            
            // 激活当前定时器
            event.target.className = 'px-4 py-2 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-lg';
            
            // 可以添加实际的定时器逻辑
            console.log(`设置定时器: ${minutes}分钟`);
        }

        function handleBackButton() {
            if (!document.getElementById('homePage').classList.contains('hidden')) {
                logout();
            } else {
                alert('返回功能');
            }
        }

        function toggleDevice(toggle) {
            const card = toggle.closest('.device-card');
            if (!card) return;
            
            const statusDots = card.querySelectorAll('.w-2.h-2');
            const statusTexts = card.querySelectorAll('.text-xs');
            
            statusDots.forEach(dot => {
                if (toggle.checked) {
                    dot.className = 'w-2 h-2 bg-green-500 rounded-full mr-2';
                } else {
                    dot.className = 'w-2 h-2 bg-gray-400 rounded-full mr-2';
                }
            });
            
            statusTexts.forEach(text => {
                if (text.textContent.includes('在线') || text.textContent.includes('离线')) {
                    if (toggle.checked) {
                        text.className = 'text-xs text-green-600 dark:text-green-400';
                        text.textContent = text.textContent.replace('离线', '在线');
                    } else {
                        text.className = 'text-xs text-gray-400 dark:text-gray-500';
                        text.textContent = text.textContent.replace('在线', '离线');
                    }
                }
            });
        }

        function logout() {
            hideAllPages();
            document.getElementById('loginForm').classList.remove('hidden');
            document.title = '登录';
        }

        // 新增页面功能函数
        function goBackToLogin() {
            hideAllLoginPages();
            document.getElementById('loginForm').classList.remove('hidden');
        }

        function hideAllLoginPages() {
            const loginPages = ['phoneLoginPage', 'forgotPasswordPage', 'wechatLoginPage', 'registerPage'];
            loginPages.forEach(page => {
                const element = document.getElementById(page);
                if (element) {
                    element.classList.add('hidden');
                }
            });
        }

        // 手机登录相关函数
        function sendSmsCode() {
            // 模拟发送验证码
            event.target.textContent = '60s后重新发送';
            event.target.disabled = true;
            let countdown = 60;
            const timer = setInterval(() => {
                countdown--;
                if (countdown > 0) {
                    event.target.textContent = `${countdown}s后重新发送`;
                } else {
                    event.target.textContent = '发送验证码';
                    event.target.disabled = false;
                    clearInterval(timer);
                }
            }, 1000);
        }

        function handlePhoneLogin() {
            // 模拟手机登录成功
            hideAllLoginPages();
            switchToTab('home');
            document.title = '海虔家';
        }

        // 忘记密码相关函数
        function setResetMethod(method) {
            const phoneMethod = document.getElementById('phoneMethod');
            const emailMethod = document.getElementById('emailMethod');
            const resetIcon = document.getElementById('resetIcon');
            const resetInput = document.getElementById('resetInput');

            if (method === 'phone') {
                phoneMethod.className = 'flex-1 py-2 px-4 bg-indigo-500 text-white rounded-lg text-sm font-medium';
                emailMethod.className = 'flex-1 py-2 px-4 bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-lg text-sm font-medium';
                resetInput.placeholder = '请输入手机号码';
                resetIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>';
            } else {
                emailMethod.className = 'flex-1 py-2 px-4 bg-indigo-500 text-white rounded-lg text-sm font-medium';
                phoneMethod.className = 'flex-1 py-2 px-4 bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-lg text-sm font-medium';
                resetInput.placeholder = '请输入邮箱地址';
                resetIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"></path>';
            }
        }

        function sendResetCode() {
            // 模拟发送重置验证码
            event.target.textContent = '60s后重新发送';
            event.target.disabled = true;
            let countdown = 60;
            const timer = setInterval(() => {
                countdown--;
                if (countdown > 0) {
                    event.target.textContent = `${countdown}s后重新发送`;
                } else {
                    event.target.textContent = '发送验证码';
                    event.target.disabled = false;
                    clearInterval(timer);
                }
            }, 1000);
        }

        function handlePasswordReset() {
            // 模拟密码重置成功
            alert('密码重置成功！请重新登录');
            goBackToLogin();
        }

        // 微信登录相关函数
        function refreshQRCode() {
            // 模拟刷新二维码
            const refreshBtn = event.target;
            refreshBtn.textContent = '正在刷新...';
            refreshBtn.disabled = true;
            
            setTimeout(() => {
                refreshBtn.textContent = '刷新二维码';
                refreshBtn.disabled = false;
                alert('二维码已刷新，请重新扫描');
            }, 2000);
        }

        // 注册相关函数
        function sendRegisterCode() {
            // 模拟发送注册验证码
            event.target.textContent = '60s后重新发送';
            event.target.disabled = true;
            let countdown = 60;
            const timer = setInterval(() => {
                countdown--;
                if (countdown > 0) {
                    event.target.textContent = `${countdown}s后重新发送`;
                } else {
                    event.target.textContent = '发送验证码';
                    event.target.disabled = false;
                    clearInterval(timer);
                }
            }, 1000);
        }

        function handleRegister() {
            // 模拟注册成功
            alert('注册成功！正在为您登录...');
            hideAllLoginPages();
            switchToTab('home');
            document.title = '海虔家';
        }

        // 智能场景页面功能函数
        function showAddScene() {
            alert('添加场景功能正在开发中...');
        }

        function executeScene(sceneType) {
            const sceneNames = {
                'home': '回家模式',
                'away': '离家模式',
                'sleep': '睡眠模式',
                'movie': '观影模式'
            };
            
            const sceneName = sceneNames[sceneType] || '未知场景';
            alert(`正在执行${sceneName}...`);
            
            // 模拟场景执行效果
            const button = event.target;
            const originalText = button.querySelector('.font-medium').textContent;
            button.querySelector('.font-medium').textContent = '执行中...';
            button.disabled = true;
            button.style.opacity = '0.7';
            
            setTimeout(() => {
                button.querySelector('.font-medium').textContent = originalText;
                button.disabled = false;
                button.style.opacity = '1';
                alert(`${sceneName}执行完成！`);
            }, 2000);
        }

        function toggleScene(toggle) {
            // 切换场景开关状态
            console.log('场景开关状态:', toggle.checked ? '启用' : '禁用');
        }

        function editAutomation(automationId) {
            alert(`编辑自动化规则 ${automationId}`);
        }

        // 个人中心页面功能函数
        function editProfile() {
            alert('编辑个人资料功能正在开发中...');
        }

        function showAccountSettings() {
            alert('账号设置页面正在开发中...\n\n功能包括：\n• 修改个人信息\n• 更改密码\n• 绑定手机/邮箱\n• 账号安全设置');
        }

        function showDeviceSettings() {
            alert('设备管理页面正在开发中...\n\n功能包括：\n• 设备配置管理\n• 设备共享设置\n• 设备权限管理\n• 设备分组管理');
        }

        function showNotificationSettings() {
            alert('通知设置页面正在开发中...\n\n功能包括：\n• 推送通知设置\n• 消息提醒配置\n• 设备状态通知\n• 场景执行通知');
        }

        function showPrivacySettings() {
            alert('隐私与安全页面正在开发中...\n\n功能包括：\n• 数据隐私保护\n• 安全验证设置\n• 登录记录查看\n• 隐私权限管理');
        }

        function showAppSettings() {
            alert('应用设置页面正在开发中...\n\n功能包括：\n• 主题色彩设置\n• 语言切换\n• 缓存清理\n• 应用偏好设置');
        }

        function showHelpSupport() {
            alert('帮助与支持页面正在开发中...\n\n功能包括：\n• 用户手册\n• 常见问题\n• 在线客服\n• 意见反馈');
        }

        function showAbout() {
            alert('关于应用\n\n海虔家智能家居控制系统\n版本：v2.1.0\n\n更新内容：\n• 优化了设备连接稳定性\n• 新增智能场景功能\n• 修复了已知问题\n• 提升了用户体验');
        }

        function confirmLogout() {
            if (confirm('确定要退出登录吗？')) {
                logout();
            }
        }
    </script>


</body></html>
